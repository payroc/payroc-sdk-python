# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.hosted_fields_create_session_response import HostedFieldsCreateSessionResponse
from .raw_client import AsyncRawHostedFieldsClient, RawHostedFieldsClient
from .types.hosted_fields_create_session_request_scenario import HostedFieldsCreateSessionRequestScenario

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class HostedFieldsClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawHostedFieldsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawHostedFieldsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawHostedFieldsClient
        """
        return self._raw_client

    def create(
        self,
        processing_terminal_id: str,
        *,
        idempotency_key: str,
        lib_version: str,
        scenario: HostedFieldsCreateSessionRequestScenario,
        secure_token_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HostedFieldsCreateSessionResponse:
        """
        Use this method to create a Hosted Fields session token. You need to generate a new session token each time you load Hosted Fields on a webpage.

        In your request, you need to indicate whether the merchant is using Hosted Fields to run a sale, save payment details, or update saved payment details.

        In the response, our gateway returns the session token and the time that it expires. You need the session token when you configure the JavaScript for Hosted Fields.

        For more information about adding Hosted Fields to a webpage, go to [Hosted Fields](https://docs.payroc.com/guides/take-payments/hosted-fields).

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        lib_version : str
            Version of the Hosted Fields JavaScript library that you are using.

            The current production version is `1.6.0.172441`.

        scenario : HostedFieldsCreateSessionRequestScenario
            Indicates if a merchant wants to take a payment or tokenize a customer's payment details:

            - `payment` - The merchant wants to run a sale or run a sale and tokenize in the same transaction.
            - `tokenization` - The merchant wants to save the customer's payment details to take a payment later or to update a customer's payment details that they've already saved.

        secure_token_id : typing.Optional[str]
            Unique identifier that represents a customer's payment details.

            If a merchant wants to update a customer's payment details that are linked to a secure token, include the secureTokenId in your request.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HostedFieldsCreateSessionResponse
            Successful request. We created the session and returned a session token.

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.hosted_fields.create(
            processing_terminal_id="1234001",
            idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
            lib_version="1.1.0.123456",
            scenario="payment",
        )
        """
        _response = self._raw_client.create(
            processing_terminal_id,
            idempotency_key=idempotency_key,
            lib_version=lib_version,
            scenario=scenario,
            secure_token_id=secure_token_id,
            request_options=request_options,
        )
        return _response.data


class AsyncHostedFieldsClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawHostedFieldsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawHostedFieldsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawHostedFieldsClient
        """
        return self._raw_client

    async def create(
        self,
        processing_terminal_id: str,
        *,
        idempotency_key: str,
        lib_version: str,
        scenario: HostedFieldsCreateSessionRequestScenario,
        secure_token_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HostedFieldsCreateSessionResponse:
        """
        Use this method to create a Hosted Fields session token. You need to generate a new session token each time you load Hosted Fields on a webpage.

        In your request, you need to indicate whether the merchant is using Hosted Fields to run a sale, save payment details, or update saved payment details.

        In the response, our gateway returns the session token and the time that it expires. You need the session token when you configure the JavaScript for Hosted Fields.

        For more information about adding Hosted Fields to a webpage, go to [Hosted Fields](https://docs.payroc.com/guides/take-payments/hosted-fields).

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        lib_version : str
            Version of the Hosted Fields JavaScript library that you are using.

            The current production version is `1.6.0.172441`.

        scenario : HostedFieldsCreateSessionRequestScenario
            Indicates if a merchant wants to take a payment or tokenize a customer's payment details:

            - `payment` - The merchant wants to run a sale or run a sale and tokenize in the same transaction.
            - `tokenization` - The merchant wants to save the customer's payment details to take a payment later or to update a customer's payment details that they've already saved.

        secure_token_id : typing.Optional[str]
            Unique identifier that represents a customer's payment details.

            If a merchant wants to update a customer's payment details that are linked to a secure token, include the secureTokenId in your request.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HostedFieldsCreateSessionResponse
            Successful request. We created the session and returned a session token.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.hosted_fields.create(
                processing_terminal_id="1234001",
                idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
                lib_version="1.1.0.123456",
                scenario="payment",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(
            processing_terminal_id,
            idempotency_key=idempotency_key,
            lib_version=lib_version,
            scenario=scenario,
            secure_token_id=secure_token_id,
            request_options=request_options,
        )
        return _response.data
