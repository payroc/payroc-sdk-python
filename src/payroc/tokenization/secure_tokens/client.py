# This file was auto-generated by Fern from our API Definition.

import typing

from ...core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ...core.custom_pagination import AsyncPayrocPager, SyncPayrocPager
from ...core.request_options import RequestOptions
from ...types.account_update import AccountUpdate
from ...types.custom_field import CustomField
from ...types.customer import Customer
from ...types.ip_address import IpAddress
from ...types.patch_request import PatchRequest
from ...types.secure_token import SecureToken
from ...types.secure_token_paginated_list_with_account_type import SecureTokenPaginatedListWithAccountType
from ...types.secure_token_with_account_type import SecureTokenWithAccountType
from .raw_client import AsyncRawSecureTokensClient, RawSecureTokensClient
from .types.tokenization_request_mit_agreement import TokenizationRequestMitAgreement
from .types.tokenization_request_source import TokenizationRequestSource
from .types.tokenization_request_three_d_secure import TokenizationRequestThreeDSecure

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class SecureTokensClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawSecureTokensClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawSecureTokensClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawSecureTokensClient
        """
        return self._raw_client

    def list(
        self,
        processing_terminal_id: str,
        *,
        secure_token_id: typing.Optional[str] = None,
        customer_name: typing.Optional[str] = None,
        phone: typing.Optional[str] = None,
        email: typing.Optional[str] = None,
        token: typing.Optional[str] = None,
        first_6: typing.Optional[str] = None,
        last_4: typing.Optional[str] = None,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SyncPayrocPager[SecureTokenWithAccountType, SecureTokenPaginatedListWithAccountType]:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of secure tokens.

        **Note:** If you want to view the details of a specific secure token and you have its secureTokenId, use our [Retrieve Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/retrieve) method.

        Use query parameters to filter the list of results that we return, for example, to search for secure tokens by customer or by the first four digits of a card number.

        Our gateway returns information about the following for each secure token in the list:

          -    Payment details that the secure token represents.
          -    Customer details, including shipping and billing addresses.
          -    Secure token that you can use to carry out transactions.

          For each secure token, we also return the secureTokenId, which you can use to perform follow-on actions.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : typing.Optional[str]
            Unique identifier that the merchant assigned to the secure token.

        customer_name : typing.Optional[str]
            Filter by the customer's name.

        phone : typing.Optional[str]
            Filter by the customer's phone number.

        email : typing.Optional[str]
            Filter by the customer's email address.

        token : typing.Optional[str]
            Filter by the token that the merchant used in a transaction to represent the customer's payment details.

        first_6 : typing.Optional[str]
            Filter by the first six digits of the card number.

        last_4 : typing.Optional[str]
            Filter by the last four digits of the card or account number.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SyncPayrocPager[SecureTokenWithAccountType, SecureTokenPaginatedListWithAccountType]
            Successful request. Returns a list of secure tokens that are currently saved on the terminal.

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        response = client.tokenization.secure_tokens.list(
            processing_terminal_id="1234001",
            secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
            customer_name="Sarah%20Hazel%20Hopper",
            phone="2025550165",
            email="sarah.hopper@example.com",
            token="296753123456",
            first_6="453985",
            last_4="7062",
            before="2571",
            after="8516",
            limit=1,
        )
        for item in response:
            yield item
        # alternatively, you can paginate page-by-page
        for page in response.iter_pages():
            yield page
        """
        return self._raw_client.list(
            processing_terminal_id,
            secure_token_id=secure_token_id,
            customer_name=customer_name,
            phone=phone,
            email=email,
            token=token,
            first_6=first_6,
            last_4=last_4,
            before=before,
            after=after,
            limit=limit,
            request_options=request_options,
        )

    def create(
        self,
        processing_terminal_id: str,
        *,
        idempotency_key: str,
        source: TokenizationRequestSource,
        secure_token_id: typing.Optional[str] = OMIT,
        operator: typing.Optional[str] = OMIT,
        mit_agreement: typing.Optional[TokenizationRequestMitAgreement] = OMIT,
        customer: typing.Optional[Customer] = OMIT,
        ip_address: typing.Optional[IpAddress] = OMIT,
        three_d_secure: typing.Optional[TokenizationRequestThreeDSecure] = OMIT,
        custom_fields: typing.Optional[typing.Sequence[CustomField]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureToken:
        """
        Use this method to create a secure token that represents a customer's payment details.

        When you create a secure token, you need to generate and provide a secureTokenId that you use to run follow-on actions:
        - [Retrieve Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/retrieve) – View the details of the secure token.
        - [Delete Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/delete) – Delete the secure token.
        - [Update Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/partially-update) – Update the details of the secure token.
        - [Update Account Details](https://docs.payroc.com/api/schema/tokenization/secure-tokens/update-account) – Update the secure token with the details from a single-use token.

        **Note:** If you don't generate a secureTokenId to identify the token, our gateway generates a unique identifier and returns it in the response.

        If the request is successful, our gateway returns a token that the merchant can use in transactions instead of the customer's sensitive payment details, for example, when they [run a sale](https://docs.payroc.com/api/schema/card-payments/payments/create).

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        source : TokenizationRequestSource
            Polymorphic object that contains the payment method to tokenize.

            The value of the type parameter determines which variant you should use:
            -    `ach` - Automated Clearing House (ACH) details
            -    `pad` - Pre-authorized debit (PAD) details
            -    `card` - Payment card details
            -    `singleUseToken` - Single-use token details

        secure_token_id : typing.Optional[str]
            Unique identifier that the merchant created for the secure token that represents the customer's payment details.
            If the merchant doesn't create a secureTokenId, the gateway generates one and returns it in the response.

        operator : typing.Optional[str]
            Operator who saved the customer's payment details.

        mit_agreement : typing.Optional[TokenizationRequestMitAgreement]
            Indicates how the merchant can use the customer's card details, as agreed by the customer:

            - `unscheduled` - Transactions for a fixed or variable amount that are run at a certain pre-defined event.
            - `recurring` - Transactions for a fixed amount that are run at regular intervals, for example, monthly. Recurring transactions don't have a fixed duration and run until the customer cancels the agreement.
            - `installment` - Transactions for a fixed amount that are run at regular intervals, for example, monthly. Installment transactions have a fixed duration.

        customer : typing.Optional[Customer]

        ip_address : typing.Optional[IpAddress]

        three_d_secure : typing.Optional[TokenizationRequestThreeDSecure]
            Polymorphic object that contains authentication information from 3-D Secure.

            The value of the type parameter determines which variant you should use:
            -    `gatewayThreeDSecure` - Use our gateway to run a 3-D Secure check.
            -    `thirdPartyThreeDSecure` - Use a third party to run a 3-D Secure check.

        custom_fields : typing.Optional[typing.Sequence[CustomField]]
            Array of customField objects.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureToken
            Successful request. We created a secure token that represents your customer's payment details.

        Examples
        --------
        import datetime

        from payroc import (
            Address,
            CardPayloadCardDetails_Raw,
            ContactMethod_Email,
            Customer,
            CustomField,
            Device,
            IpAddress,
            Payroc,
            Shipping,
        )
        from payroc.tokenization.secure_tokens import TokenizationRequestSource_Card

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.tokenization.secure_tokens.create(
            processing_terminal_id="1234001",
            idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
            operator="Jane",
            mit_agreement="unscheduled",
            customer=Customer(
                first_name="Sarah",
                last_name="Hopper",
                date_of_birth=datetime.date.fromisoformat(
                    "1990-07-15",
                ),
                reference_number="Customer-12",
                billing_address=Address(
                    address_1="1 Example Ave.",
                    address_2="Example Address Line 2",
                    address_3="Example Address Line 3",
                    city="Chicago",
                    state="Illinois",
                    country="US",
                    postal_code="60056",
                ),
                shipping_address=Shipping(
                    recipient_name="Sarah Hopper",
                    address=Address(
                        address_1="1 Example Ave.",
                        address_2="Example Address Line 2",
                        address_3="Example Address Line 3",
                        city="Chicago",
                        state="Illinois",
                        country="US",
                        postal_code="60056",
                    ),
                ),
                contact_methods=[
                    ContactMethod_Email(
                        value="jane.doe@example.com",
                    )
                ],
                notification_language="en",
            ),
            ip_address=IpAddress(
                type="ipv4",
                value="104.18.24.203",
            ),
            source=TokenizationRequestSource_Card(
                card_details=CardPayloadCardDetails_Raw(
                    device=Device(
                        model="bbposChp",
                        serial_number="1850010868",
                    ),
                    raw_data="A1B2C3D4E5F67890ABCD1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF",
                ),
            ),
            custom_fields=[
                CustomField(
                    name="yourCustomField",
                    value="abc123",
                )
            ],
        )
        """
        _response = self._raw_client.create(
            processing_terminal_id,
            idempotency_key=idempotency_key,
            source=source,
            secure_token_id=secure_token_id,
            operator=operator,
            mit_agreement=mit_agreement,
            customer=customer,
            ip_address=ip_address,
            three_d_secure=three_d_secure,
            custom_fields=custom_fields,
            request_options=request_options,
        )
        return _response.data

    def retrieve(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureTokenWithAccountType:
        """
        Use this method to retrieve information about a secure token.

        To retrieve a secure token, you need its secureTokenID, which you sent in the request of the [Create Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/create) method.

        **Note:** If you don't have the secureTokenId, use our [List Secure Tokens](https://docs.payroc.com/api/schema/tokenization/secure-tokens/list) method to search for the secure token.

        Our gateway returns the following information about the secure token:

          -    Payment details that the secure token represents.
          -    Customer details, including shipping and billing addresses.
          -    Secure token that you can use to carry out transactions.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureTokenWithAccountType
            Successful request. Returns the secure token and its related payment details.

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.tokenization.secure_tokens.retrieve(
            processing_terminal_id="1234001",
            secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
        )
        """
        _response = self._raw_client.retrieve(processing_terminal_id, secure_token_id, request_options=request_options)
        return _response.data

    def delete(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Use this method to delete a secure token and its related payment details from our vault.

        To delete a secure token, you need its secureTokenId, which you sent in the request of the [Create Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/create) method.

        **Note:** If you don’t have the secureTokenId, use our [List Secure Tokens](https://docs.payroc.com/api/schema/tokenization/secure-tokens/list) method to search for the secure token.

        When you delete a secure token, you can’t recover it, and you can’t reuse its identifier for a new token.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.tokenization.secure_tokens.delete(
            processing_terminal_id="1234001",
            secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
        )
        """
        _response = self._raw_client.delete(processing_terminal_id, secure_token_id, request_options=request_options)
        return _response.data

    def partially_update(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        idempotency_key: str,
        request: PatchRequest,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureToken:
        """
        Use this method to partially update a secure token. Structure your request to follow the [RFC 6902](https://datatracker.ietf.org/doc/html/rfc6902) standard.

        To update a secure token, you need its secureTokenId, which you sent in the request of the [Create Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/create) method.

        **Note:** If you don't have the secureTokenId, use our [List Secure Tokens](https://docs.payroc.com/api/schema/tokenization/secure-tokens/list) method to search  for the payment.

        You can update all of the properties of the secure token, except the following:
        - processingTerminalId
        - type
        - token
        - status
        - source/Card
          - type
          - cardNumber
          - cardType
          - currency
          - debit
          - surcharging
        - source/ACH account
          - accountNumber
          - routingNumber
        - source/PAD account
          - type
          - accountNumber
          - transitNumber

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        request : PatchRequest

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureToken
            Successful request. We updated the customer's payment details.

        Examples
        --------
        from payroc import PatchDocument_Remove, Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.tokenization.secure_tokens.partially_update(
            processing_terminal_id="1234001",
            secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
            idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
            request=[
                PatchDocument_Remove(
                    path="path",
                ),
                PatchDocument_Remove(
                    path="path",
                ),
                PatchDocument_Remove(
                    path="path",
                ),
            ],
        )
        """
        _response = self._raw_client.partially_update(
            processing_terminal_id,
            secure_token_id,
            idempotency_key=idempotency_key,
            request=request,
            request_options=request_options,
        )
        return _response.data

    def update_account(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        idempotency_key: str,
        request: AccountUpdate,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureToken:
        """
        Use this method to update a secure token if you have a single-use token from Hosted Fields.

        **Note:** If you don't have a single-use token, you can update saved payment details with our [Update Secure Token](https://docs.payroc.com/api/resources#updateSecureToken) method. For more information about our two options to update a secure token, go to [Update saved payment details](https://docs.payroc.com/guides/take-payments/update-saved-payment-details).

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        request : AccountUpdate

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureToken
            Successful request. We updated the payment details represented by the secure token.

        Examples
        --------
        from payroc import AccountUpdate_SingleUseToken, Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.tokenization.secure_tokens.update_account(
            processing_terminal_id="1234001",
            secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
            idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
            request=AccountUpdate_SingleUseToken(
                token="abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
            ),
        )
        """
        _response = self._raw_client.update_account(
            processing_terminal_id,
            secure_token_id,
            idempotency_key=idempotency_key,
            request=request,
            request_options=request_options,
        )
        return _response.data


class AsyncSecureTokensClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawSecureTokensClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawSecureTokensClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawSecureTokensClient
        """
        return self._raw_client

    async def list(
        self,
        processing_terminal_id: str,
        *,
        secure_token_id: typing.Optional[str] = None,
        customer_name: typing.Optional[str] = None,
        phone: typing.Optional[str] = None,
        email: typing.Optional[str] = None,
        token: typing.Optional[str] = None,
        first_6: typing.Optional[str] = None,
        last_4: typing.Optional[str] = None,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncPayrocPager[SecureTokenWithAccountType, SecureTokenPaginatedListWithAccountType]:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of secure tokens.

        **Note:** If you want to view the details of a specific secure token and you have its secureTokenId, use our [Retrieve Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/retrieve) method.

        Use query parameters to filter the list of results that we return, for example, to search for secure tokens by customer or by the first four digits of a card number.

        Our gateway returns information about the following for each secure token in the list:

          -    Payment details that the secure token represents.
          -    Customer details, including shipping and billing addresses.
          -    Secure token that you can use to carry out transactions.

          For each secure token, we also return the secureTokenId, which you can use to perform follow-on actions.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : typing.Optional[str]
            Unique identifier that the merchant assigned to the secure token.

        customer_name : typing.Optional[str]
            Filter by the customer's name.

        phone : typing.Optional[str]
            Filter by the customer's phone number.

        email : typing.Optional[str]
            Filter by the customer's email address.

        token : typing.Optional[str]
            Filter by the token that the merchant used in a transaction to represent the customer's payment details.

        first_6 : typing.Optional[str]
            Filter by the first six digits of the card number.

        last_4 : typing.Optional[str]
            Filter by the last four digits of the card or account number.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncPayrocPager[SecureTokenWithAccountType, SecureTokenPaginatedListWithAccountType]
            Successful request. Returns a list of secure tokens that are currently saved on the terminal.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            response = await client.tokenization.secure_tokens.list(
                processing_terminal_id="1234001",
                secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                customer_name="Sarah%20Hazel%20Hopper",
                phone="2025550165",
                email="sarah.hopper@example.com",
                token="296753123456",
                first_6="453985",
                last_4="7062",
                before="2571",
                after="8516",
                limit=1,
            )
            async for item in response:
                yield item

            # alternatively, you can paginate page-by-page
            async for page in response.iter_pages():
                yield page


        asyncio.run(main())
        """
        return await self._raw_client.list(
            processing_terminal_id,
            secure_token_id=secure_token_id,
            customer_name=customer_name,
            phone=phone,
            email=email,
            token=token,
            first_6=first_6,
            last_4=last_4,
            before=before,
            after=after,
            limit=limit,
            request_options=request_options,
        )

    async def create(
        self,
        processing_terminal_id: str,
        *,
        idempotency_key: str,
        source: TokenizationRequestSource,
        secure_token_id: typing.Optional[str] = OMIT,
        operator: typing.Optional[str] = OMIT,
        mit_agreement: typing.Optional[TokenizationRequestMitAgreement] = OMIT,
        customer: typing.Optional[Customer] = OMIT,
        ip_address: typing.Optional[IpAddress] = OMIT,
        three_d_secure: typing.Optional[TokenizationRequestThreeDSecure] = OMIT,
        custom_fields: typing.Optional[typing.Sequence[CustomField]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureToken:
        """
        Use this method to create a secure token that represents a customer's payment details.

        When you create a secure token, you need to generate and provide a secureTokenId that you use to run follow-on actions:
        - [Retrieve Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/retrieve) – View the details of the secure token.
        - [Delete Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/delete) – Delete the secure token.
        - [Update Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/partially-update) – Update the details of the secure token.
        - [Update Account Details](https://docs.payroc.com/api/schema/tokenization/secure-tokens/update-account) – Update the secure token with the details from a single-use token.

        **Note:** If you don't generate a secureTokenId to identify the token, our gateway generates a unique identifier and returns it in the response.

        If the request is successful, our gateway returns a token that the merchant can use in transactions instead of the customer's sensitive payment details, for example, when they [run a sale](https://docs.payroc.com/api/schema/card-payments/payments/create).

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        source : TokenizationRequestSource
            Polymorphic object that contains the payment method to tokenize.

            The value of the type parameter determines which variant you should use:
            -    `ach` - Automated Clearing House (ACH) details
            -    `pad` - Pre-authorized debit (PAD) details
            -    `card` - Payment card details
            -    `singleUseToken` - Single-use token details

        secure_token_id : typing.Optional[str]
            Unique identifier that the merchant created for the secure token that represents the customer's payment details.
            If the merchant doesn't create a secureTokenId, the gateway generates one and returns it in the response.

        operator : typing.Optional[str]
            Operator who saved the customer's payment details.

        mit_agreement : typing.Optional[TokenizationRequestMitAgreement]
            Indicates how the merchant can use the customer's card details, as agreed by the customer:

            - `unscheduled` - Transactions for a fixed or variable amount that are run at a certain pre-defined event.
            - `recurring` - Transactions for a fixed amount that are run at regular intervals, for example, monthly. Recurring transactions don't have a fixed duration and run until the customer cancels the agreement.
            - `installment` - Transactions for a fixed amount that are run at regular intervals, for example, monthly. Installment transactions have a fixed duration.

        customer : typing.Optional[Customer]

        ip_address : typing.Optional[IpAddress]

        three_d_secure : typing.Optional[TokenizationRequestThreeDSecure]
            Polymorphic object that contains authentication information from 3-D Secure.

            The value of the type parameter determines which variant you should use:
            -    `gatewayThreeDSecure` - Use our gateway to run a 3-D Secure check.
            -    `thirdPartyThreeDSecure` - Use a third party to run a 3-D Secure check.

        custom_fields : typing.Optional[typing.Sequence[CustomField]]
            Array of customField objects.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureToken
            Successful request. We created a secure token that represents your customer's payment details.

        Examples
        --------
        import asyncio
        import datetime

        from payroc import (
            Address,
            AsyncPayroc,
            CardPayloadCardDetails_Raw,
            ContactMethod_Email,
            Customer,
            CustomField,
            Device,
            IpAddress,
            Shipping,
        )
        from payroc.tokenization.secure_tokens import TokenizationRequestSource_Card

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.tokenization.secure_tokens.create(
                processing_terminal_id="1234001",
                idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
                operator="Jane",
                mit_agreement="unscheduled",
                customer=Customer(
                    first_name="Sarah",
                    last_name="Hopper",
                    date_of_birth=datetime.date.fromisoformat(
                        "1990-07-15",
                    ),
                    reference_number="Customer-12",
                    billing_address=Address(
                        address_1="1 Example Ave.",
                        address_2="Example Address Line 2",
                        address_3="Example Address Line 3",
                        city="Chicago",
                        state="Illinois",
                        country="US",
                        postal_code="60056",
                    ),
                    shipping_address=Shipping(
                        recipient_name="Sarah Hopper",
                        address=Address(
                            address_1="1 Example Ave.",
                            address_2="Example Address Line 2",
                            address_3="Example Address Line 3",
                            city="Chicago",
                            state="Illinois",
                            country="US",
                            postal_code="60056",
                        ),
                    ),
                    contact_methods=[
                        ContactMethod_Email(
                            value="jane.doe@example.com",
                        )
                    ],
                    notification_language="en",
                ),
                ip_address=IpAddress(
                    type="ipv4",
                    value="104.18.24.203",
                ),
                source=TokenizationRequestSource_Card(
                    card_details=CardPayloadCardDetails_Raw(
                        device=Device(
                            model="bbposChp",
                            serial_number="1850010868",
                        ),
                        raw_data="A1B2C3D4E5F67890ABCD1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF",
                    ),
                ),
                custom_fields=[
                    CustomField(
                        name="yourCustomField",
                        value="abc123",
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(
            processing_terminal_id,
            idempotency_key=idempotency_key,
            source=source,
            secure_token_id=secure_token_id,
            operator=operator,
            mit_agreement=mit_agreement,
            customer=customer,
            ip_address=ip_address,
            three_d_secure=three_d_secure,
            custom_fields=custom_fields,
            request_options=request_options,
        )
        return _response.data

    async def retrieve(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureTokenWithAccountType:
        """
        Use this method to retrieve information about a secure token.

        To retrieve a secure token, you need its secureTokenID, which you sent in the request of the [Create Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/create) method.

        **Note:** If you don't have the secureTokenId, use our [List Secure Tokens](https://docs.payroc.com/api/schema/tokenization/secure-tokens/list) method to search for the secure token.

        Our gateway returns the following information about the secure token:

          -    Payment details that the secure token represents.
          -    Customer details, including shipping and billing addresses.
          -    Secure token that you can use to carry out transactions.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureTokenWithAccountType
            Successful request. Returns the secure token and its related payment details.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.tokenization.secure_tokens.retrieve(
                processing_terminal_id="1234001",
                secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.retrieve(
            processing_terminal_id, secure_token_id, request_options=request_options
        )
        return _response.data

    async def delete(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Use this method to delete a secure token and its related payment details from our vault.

        To delete a secure token, you need its secureTokenId, which you sent in the request of the [Create Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/create) method.

        **Note:** If you don’t have the secureTokenId, use our [List Secure Tokens](https://docs.payroc.com/api/schema/tokenization/secure-tokens/list) method to search for the secure token.

        When you delete a secure token, you can’t recover it, and you can’t reuse its identifier for a new token.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.tokenization.secure_tokens.delete(
                processing_terminal_id="1234001",
                secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete(
            processing_terminal_id, secure_token_id, request_options=request_options
        )
        return _response.data

    async def partially_update(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        idempotency_key: str,
        request: PatchRequest,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureToken:
        """
        Use this method to partially update a secure token. Structure your request to follow the [RFC 6902](https://datatracker.ietf.org/doc/html/rfc6902) standard.

        To update a secure token, you need its secureTokenId, which you sent in the request of the [Create Secure Token](https://docs.payroc.com/api/schema/tokenization/secure-tokens/create) method.

        **Note:** If you don't have the secureTokenId, use our [List Secure Tokens](https://docs.payroc.com/api/schema/tokenization/secure-tokens/list) method to search  for the payment.

        You can update all of the properties of the secure token, except the following:
        - processingTerminalId
        - type
        - token
        - status
        - source/Card
          - type
          - cardNumber
          - cardType
          - currency
          - debit
          - surcharging
        - source/ACH account
          - accountNumber
          - routingNumber
        - source/PAD account
          - type
          - accountNumber
          - transitNumber

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        request : PatchRequest

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureToken
            Successful request. We updated the customer's payment details.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc, PatchDocument_Remove

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.tokenization.secure_tokens.partially_update(
                processing_terminal_id="1234001",
                secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
                request=[
                    PatchDocument_Remove(
                        path="path",
                    ),
                    PatchDocument_Remove(
                        path="path",
                    ),
                    PatchDocument_Remove(
                        path="path",
                    ),
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.partially_update(
            processing_terminal_id,
            secure_token_id,
            idempotency_key=idempotency_key,
            request=request,
            request_options=request_options,
        )
        return _response.data

    async def update_account(
        self,
        processing_terminal_id: str,
        secure_token_id: str,
        *,
        idempotency_key: str,
        request: AccountUpdate,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SecureToken:
        """
        Use this method to update a secure token if you have a single-use token from Hosted Fields.

        **Note:** If you don't have a single-use token, you can update saved payment details with our [Update Secure Token](https://docs.payroc.com/api/resources#updateSecureToken) method. For more information about our two options to update a secure token, go to [Update saved payment details](https://docs.payroc.com/guides/take-payments/update-saved-payment-details).

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        secure_token_id : str
            Unique identifier that the merchant assigned to the secure token.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        request : AccountUpdate

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SecureToken
            Successful request. We updated the payment details represented by the secure token.

        Examples
        --------
        import asyncio

        from payroc import AccountUpdate_SingleUseToken, AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.tokenization.secure_tokens.update_account(
                processing_terminal_id="1234001",
                secure_token_id="MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
                request=AccountUpdate_SingleUseToken(
                    token="abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update_account(
            processing_terminal_id,
            secure_token_id,
            idempotency_key=idempotency_key,
            request=request,
            request_options=request_options,
        )
        return _response.data
