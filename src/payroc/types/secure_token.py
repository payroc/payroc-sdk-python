# This file was auto-generated by Fern from our API Definition.

import typing

import pydantic
import typing_extensions
from ..core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ..core.serialization import FieldMetadata
from .custom_field import CustomField
from .retrieved_customer import RetrievedCustomer
from .secure_token_mit_agreement import SecureTokenMitAgreement
from .secure_token_source import SecureTokenSource
from .secure_token_status import SecureTokenStatus


class SecureToken(UniversalBaseModel):
    """
    Object that contains information about the secure token.
    """

    secure_token_id: typing_extensions.Annotated[
        str,
        FieldMetadata(alias="secureTokenId"),
        pydantic.Field(
            alias="secureTokenId",
            description="Unique identifier that the merchant created for the secure token that represents the customer's payment details.",
        ),
    ]
    processing_terminal_id: typing_extensions.Annotated[
        str,
        FieldMetadata(alias="processingTerminalId"),
        pydantic.Field(alias="processingTerminalId", description="Unique identifier that we assigned to the terminal."),
    ]
    mit_agreement: typing_extensions.Annotated[
        typing.Optional[SecureTokenMitAgreement],
        FieldMetadata(alias="mitAgreement"),
        pydantic.Field(
            alias="mitAgreement",
            description="Indicates how the merchant can use the customer's card details, as agreed by the customer:\n\n- `unscheduled` - Transactions for a fixed or variable amount that are run at a certain pre-defined event.\n- `recurring` - Transactions for a fixed amount that are run at regular intervals, for example, monthly. Recurring transactions don't have a fixed duration and run until the customer cancels the agreement.\n- `installment` - Transactions for a fixed amount that are run at regular intervals, for example, monthly. Installment transactions have a fixed duration.",
        ),
    ] = None
    customer: typing.Optional[RetrievedCustomer] = None
    source: SecureTokenSource = pydantic.Field()
    """
    Polymorphic object that contains the payment method that we tokenized.  
    
    The value of the type parameter determines which variant you should use:  
    -    `ach` - Automated Clearing House (ACH) details
    -    `pad` - Pre-authorized debit (PAD) details
    -    `card` - Payment card details
    """

    token: str = pydantic.Field()
    """
    Token that the merchant can use in future transactions to represent the customer's payment details. The token:  
    - Begins with the six-digit identification number **296753**.
    - Contains up to 12 digits.  
    - Contains a single check digit that we calculate using the Luhn algorithm.
    """

    status: SecureTokenStatus = pydantic.Field()
    """
    Outcome of a security check on the status of the customer's payment card or bank account.  
    
    **Note:** Depending on the merchant's account settings, this feature may be unavailable. 
    """

    custom_fields: typing_extensions.Annotated[
        typing.Optional[typing.List[CustomField]],
        FieldMetadata(alias="customFields"),
        pydantic.Field(alias="customFields", description="Array of customField objects."),
    ] = None

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
