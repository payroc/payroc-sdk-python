# This file was auto-generated by Fern from our API Definition.

import typing

from ...core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ...core.custom_pagination import AsyncPayrocPager, SyncPayrocPager
from ...core.request_options import RequestOptions
from ...types.currency import Currency
from ...types.patch_request import PatchRequest
from ...types.payment_plan import PaymentPlan
from ...types.payment_plan_base_frequency import PaymentPlanBaseFrequency
from ...types.payment_plan_base_on_delete import PaymentPlanBaseOnDelete
from ...types.payment_plan_base_on_update import PaymentPlanBaseOnUpdate
from ...types.payment_plan_base_type import PaymentPlanBaseType
from ...types.payment_plan_paginated_list import PaymentPlanPaginatedList
from ...types.payment_plan_recurring_order import PaymentPlanRecurringOrder
from ...types.payment_plan_setup_order import PaymentPlanSetupOrder
from .raw_client import AsyncRawPaymentPlansClient, RawPaymentPlansClient

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class PaymentPlansClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawPaymentPlansClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawPaymentPlansClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawPaymentPlansClient
        """
        return self._raw_client

    def list(
        self,
        processing_terminal_id: str,
        *,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SyncPayrocPager[PaymentPlan, PaymentPlanPaginatedList]:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of payment plans for a processing terminal.

        **Note:** If you want to view the details of a specific payment plan and you have its paymentPlanId, use our [Retrieve Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/retrieve) method.

        Our gateway returns the following information about each payment plan in the list:

          -    Name, length, and currency of the plan
          -    How often our gateway collects each payment
          -    How much our gateway collects for each payment
          -    What happens if the merchant updates or deletes the plan

        For each payment plan, we return the paymentPlanId, which you can use to perform follow-on actions.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SyncPayrocPager[PaymentPlan, PaymentPlanPaginatedList]
            Successful request. Returns a paginated list of payment plans.

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        response = client.repeat_payments.payment_plans.list(
            processing_terminal_id="1234001",
            before="2571",
            after="8516",
            limit=1,
        )
        for item in response:
            yield item
        # alternatively, you can paginate page-by-page
        for page in response.iter_pages():
            yield page
        """
        return self._raw_client.list(
            processing_terminal_id, before=before, after=after, limit=limit, request_options=request_options
        )

    def create(
        self,
        processing_terminal_id_: str,
        *,
        idempotency_key: str,
        payment_plan_id: str,
        name: str,
        currency: Currency,
        type: PaymentPlanBaseType,
        frequency: PaymentPlanBaseFrequency,
        on_update: PaymentPlanBaseOnUpdate,
        on_delete: PaymentPlanBaseOnDelete,
        setup_order: typing.Optional[PaymentPlanSetupOrder] = OMIT,
        recurring_order: typing.Optional[PaymentPlanRecurringOrder] = OMIT,
        processing_terminal_id: typing.Optional[str] = OMIT,
        description: typing.Optional[str] = OMIT,
        length: typing.Optional[int] = OMIT,
        custom_field_names: typing.Optional[typing.Sequence[str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaymentPlan:
        """
        Use this method to create a payment schedule that you can assign customers to.

        **Note:** This method is part of our Repeat Payments feature. To help you understand how this method works with our Subscriptions endpoints, go to [Repeat Payments](https://docs.payroc.com/guides/integrate/repeat-payments).

        When you create a payment plan you need to provide a unique paymentPlanId that you use to run follow-on actions:

        -    [Retrieve Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/retrieve)  - View the details of the payment plan.
        -    [Update Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/partially-update)  - Update the details of the payment plan.
        -    [Delete Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/delete)  - Delete the payment plan.
        -    [Create Subscription](https://docs.payroc.com/api/schema/repeat-payments/subscriptions/create)  - Subscribe a customer to the payment plan.

        The request includes the following settings:

        -    **type** - Indicates if our gateway or the merchant collects payments. If the merchant manually collects payments, integrate with the [Pay Manual Subscription](https://docs.payroc.com/api/schema/repeat-payments/subscriptions/pay) method.
        -    **recurringOrder** - Amount of each payment if the gateway automatically collect payments.
        -    **setupOrder** - Setup fee that our gateway immediately collects from the customer's payment method.
        -    **onUpdate and onDelete** - Indicates what happens to associated subscriptions if the merchant updates or deletes the payment plan.

        Parameters
        ----------
        processing_terminal_id_ : str
            Unique identifier that we assigned to the terminal.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        payment_plan_id : str
            Unique identifier that the merchant assigns to the payment plan.

        name : str
            Name of the payment plan.

        currency : Currency

        type : PaymentPlanBaseType
            Indicates how the merchant takes the payment from the customer's account.
            - `manual` - The merchant manually collects payments from the customer.
            - `automatic` - The terminal automatically collects payments from the customer.

        frequency : PaymentPlanBaseFrequency
            Indicates how often the merchant or the terminal collects a payment from the customer.

        on_update : PaymentPlanBaseOnUpdate
            Indicates whether any changes that the merchant makes to the payment plan apply to existing subscriptions.
            - `update` - Changes apply to existing subscriptions.
            - `continue` - Changes don't apply to existing subscriptions.

        on_delete : PaymentPlanBaseOnDelete
            Indicates what happens to existing subscriptions if the merchant deletes the payment plan.
            - `complete` - Stops existing subscriptions.
            - `continue` - Continues existing subscriptions.

        setup_order : typing.Optional[PaymentPlanSetupOrder]

        recurring_order : typing.Optional[PaymentPlanRecurringOrder]

        processing_terminal_id : typing.Optional[str]
            Unique identifier of the terminal that the payment plan is assigned to.

        description : typing.Optional[str]
            Description of the payment plan.

        length : typing.Optional[int]
            Number of payments for the payment plan.

            To indicate that the payment plan should run indefinitely, send a value of `0`.

        custom_field_names : typing.Optional[typing.Sequence[str]]
            Array of custom fields that you can use in subscriptions linked to the payment plan.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaymentPlan
            Successful request. We created the payment plan.

        Examples
        --------
        from payroc import (
            PaymentPlanOrderBreakdown,
            PaymentPlanRecurringOrder,
            PaymentPlanSetupOrder,
            Payroc,
            RetrievedTax,
        )

        client = Payroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.repeat_payments.payment_plans.create(
            processing_terminal_id_="1234001",
            idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
            payment_plan_id="PlanRef8765",
            name="Premium Club",
            description="Monthly Premium Club subscription",
            currency="USD",
            length=12,
            type="automatic",
            frequency="monthly",
            on_update="continue",
            on_delete="complete",
            custom_field_names=["yourCustomField"],
            setup_order=PaymentPlanSetupOrder(
                amount=4999,
                description="Initial setup fee for Premium Club subscription",
                breakdown=PaymentPlanOrderBreakdown(
                    subtotal=4347,
                    taxes=[
                        RetrievedTax(
                            name="Sales Tax",
                            rate=5.0,
                        )
                    ],
                ),
            ),
            recurring_order=PaymentPlanRecurringOrder(
                amount=4999,
                description="Monthly Premium Club subscription",
                breakdown=PaymentPlanOrderBreakdown(
                    subtotal=4347,
                    taxes=[
                        RetrievedTax(
                            name="Sales Tax",
                            rate=5.0,
                        )
                    ],
                ),
            ),
        )
        """
        _response = self._raw_client.create(
            processing_terminal_id_,
            idempotency_key=idempotency_key,
            payment_plan_id=payment_plan_id,
            name=name,
            currency=currency,
            type=type,
            frequency=frequency,
            on_update=on_update,
            on_delete=on_delete,
            setup_order=setup_order,
            recurring_order=recurring_order,
            processing_terminal_id=processing_terminal_id,
            description=description,
            length=length,
            custom_field_names=custom_field_names,
            request_options=request_options,
        )
        return _response.data

    def retrieve(
        self,
        processing_terminal_id: str,
        payment_plan_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaymentPlan:
        """
        Use this method to retrieve information about a payment plan.

        To retrieve a payment plan, you need its paymentPlanId. Our gateway returned the paymentPlanId in the response of the [Create Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/create) method.

        **Note:** If you don't have the paymentPlanId, use our [List Payment Plans](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/list) method to search for the payment plan.

        Our gateway returns the following information about the payment plan:

          -    Name, length, and currency of the plan
          -    How often our gateway collects each payment
          -    How much our gateway collects for each payment
          -    What happens if the merchant updates or deletes the plan

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        payment_plan_id : str
            Unique identifier that the merchant assigned to the payment plan.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaymentPlan
            Successful request. Returns the requested payment plan.

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.repeat_payments.payment_plans.retrieve(
            processing_terminal_id="1234001",
            payment_plan_id="PlanRef8765",
        )
        """
        _response = self._raw_client.retrieve(processing_terminal_id, payment_plan_id, request_options=request_options)
        return _response.data

    def delete(
        self,
        processing_terminal_id: str,
        payment_plan_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Use this method to delete a payment plan.

        > **Important:** When you delete a payment plan, you can’t recover it. You also won’t be able to add subscriptions to the payment plan.

        To delete a payment plan, you need its paymentPlanId, which you sent in the request of the [Create Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/create) method.

        **Note:** If you don't have the paymentPlanId, use our [List Payment Plans](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/list) method to search for the payment plan.

        The value you sent for the onDelete parameter when you created the payment plan indicates what happens to associated subscriptions when you delete the plan:

          -    `complete` - Our gateway stops taking payments for the subscriptions associated with the payment plan.
          -    `continue` - Our gateway continues to take payments for the subscriptions associated with the payment plan. To stop a subscription for a cancelled payment plan, go to the [Deactivate Subscription](https://docs.payroc.com/api/schema/repeat-payments/subscriptions/deactivate) method.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        payment_plan_id : str
            Unique identifier that the merchant assigned to the payment plan.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.repeat_payments.payment_plans.delete(
            processing_terminal_id="1234001",
            payment_plan_id="PlanRef8765",
        )
        """
        _response = self._raw_client.delete(processing_terminal_id, payment_plan_id, request_options=request_options)
        return _response.data

    def partially_update(
        self,
        processing_terminal_id: str,
        payment_plan_id: str,
        *,
        idempotency_key: str,
        request: PatchRequest,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaymentPlan:
        """
        Use this method to partially update a payment plan. Structure your request to follow the [RFC 6902](https://datatracker.ietf.org/doc/html/rfc6902) standard.

        To update a payment plan, you need its paymentPlanId, which you sent in the request of the [Create Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/create) method.

        **Note:** If you don't have the paymentPlanId, use our [List Payment Plans](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/list) method to search for the payment plan.

        You can update all of the properties of the payment plan except for the paymentPlanId.

        The value you sent for the onUpdate parameter when you created the payment plan indicates what happens to the associated subscriptions when you update the plan:
        - `update` - Our gateway updates the subscriptions associated with the payment plan.
        - `continue` - Our  gateway doesn't update the subscriptions associated with the payment plan.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        payment_plan_id : str
            Unique identifier that the merchant assigned to the payment plan.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        request : PatchRequest

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaymentPlan
            Successful request. We updated the payment plan.

        Examples
        --------
        from payroc import PatchDocument_Remove, Payroc

        client = Payroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.repeat_payments.payment_plans.partially_update(
            processing_terminal_id="1234001",
            payment_plan_id="PlanRef8765",
            idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
            request=[
                PatchDocument_Remove(
                    path="path",
                ),
                PatchDocument_Remove(
                    path="path",
                ),
                PatchDocument_Remove(
                    path="path",
                ),
            ],
        )
        """
        _response = self._raw_client.partially_update(
            processing_terminal_id,
            payment_plan_id,
            idempotency_key=idempotency_key,
            request=request,
            request_options=request_options,
        )
        return _response.data


class AsyncPaymentPlansClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawPaymentPlansClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawPaymentPlansClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawPaymentPlansClient
        """
        return self._raw_client

    async def list(
        self,
        processing_terminal_id: str,
        *,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncPayrocPager[PaymentPlan, PaymentPlanPaginatedList]:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of payment plans for a processing terminal.

        **Note:** If you want to view the details of a specific payment plan and you have its paymentPlanId, use our [Retrieve Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/retrieve) method.

        Our gateway returns the following information about each payment plan in the list:

          -    Name, length, and currency of the plan
          -    How often our gateway collects each payment
          -    How much our gateway collects for each payment
          -    What happens if the merchant updates or deletes the plan

        For each payment plan, we return the paymentPlanId, which you can use to perform follow-on actions.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncPayrocPager[PaymentPlan, PaymentPlanPaginatedList]
            Successful request. Returns a paginated list of payment plans.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            response = await client.repeat_payments.payment_plans.list(
                processing_terminal_id="1234001",
                before="2571",
                after="8516",
                limit=1,
            )
            async for item in response:
                yield item

            # alternatively, you can paginate page-by-page
            async for page in response.iter_pages():
                yield page


        asyncio.run(main())
        """
        return await self._raw_client.list(
            processing_terminal_id, before=before, after=after, limit=limit, request_options=request_options
        )

    async def create(
        self,
        processing_terminal_id_: str,
        *,
        idempotency_key: str,
        payment_plan_id: str,
        name: str,
        currency: Currency,
        type: PaymentPlanBaseType,
        frequency: PaymentPlanBaseFrequency,
        on_update: PaymentPlanBaseOnUpdate,
        on_delete: PaymentPlanBaseOnDelete,
        setup_order: typing.Optional[PaymentPlanSetupOrder] = OMIT,
        recurring_order: typing.Optional[PaymentPlanRecurringOrder] = OMIT,
        processing_terminal_id: typing.Optional[str] = OMIT,
        description: typing.Optional[str] = OMIT,
        length: typing.Optional[int] = OMIT,
        custom_field_names: typing.Optional[typing.Sequence[str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaymentPlan:
        """
        Use this method to create a payment schedule that you can assign customers to.

        **Note:** This method is part of our Repeat Payments feature. To help you understand how this method works with our Subscriptions endpoints, go to [Repeat Payments](https://docs.payroc.com/guides/integrate/repeat-payments).

        When you create a payment plan you need to provide a unique paymentPlanId that you use to run follow-on actions:

        -    [Retrieve Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/retrieve)  - View the details of the payment plan.
        -    [Update Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/partially-update)  - Update the details of the payment plan.
        -    [Delete Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/delete)  - Delete the payment plan.
        -    [Create Subscription](https://docs.payroc.com/api/schema/repeat-payments/subscriptions/create)  - Subscribe a customer to the payment plan.

        The request includes the following settings:

        -    **type** - Indicates if our gateway or the merchant collects payments. If the merchant manually collects payments, integrate with the [Pay Manual Subscription](https://docs.payroc.com/api/schema/repeat-payments/subscriptions/pay) method.
        -    **recurringOrder** - Amount of each payment if the gateway automatically collect payments.
        -    **setupOrder** - Setup fee that our gateway immediately collects from the customer's payment method.
        -    **onUpdate and onDelete** - Indicates what happens to associated subscriptions if the merchant updates or deletes the payment plan.

        Parameters
        ----------
        processing_terminal_id_ : str
            Unique identifier that we assigned to the terminal.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        payment_plan_id : str
            Unique identifier that the merchant assigns to the payment plan.

        name : str
            Name of the payment plan.

        currency : Currency

        type : PaymentPlanBaseType
            Indicates how the merchant takes the payment from the customer's account.
            - `manual` - The merchant manually collects payments from the customer.
            - `automatic` - The terminal automatically collects payments from the customer.

        frequency : PaymentPlanBaseFrequency
            Indicates how often the merchant or the terminal collects a payment from the customer.

        on_update : PaymentPlanBaseOnUpdate
            Indicates whether any changes that the merchant makes to the payment plan apply to existing subscriptions.
            - `update` - Changes apply to existing subscriptions.
            - `continue` - Changes don't apply to existing subscriptions.

        on_delete : PaymentPlanBaseOnDelete
            Indicates what happens to existing subscriptions if the merchant deletes the payment plan.
            - `complete` - Stops existing subscriptions.
            - `continue` - Continues existing subscriptions.

        setup_order : typing.Optional[PaymentPlanSetupOrder]

        recurring_order : typing.Optional[PaymentPlanRecurringOrder]

        processing_terminal_id : typing.Optional[str]
            Unique identifier of the terminal that the payment plan is assigned to.

        description : typing.Optional[str]
            Description of the payment plan.

        length : typing.Optional[int]
            Number of payments for the payment plan.

            To indicate that the payment plan should run indefinitely, send a value of `0`.

        custom_field_names : typing.Optional[typing.Sequence[str]]
            Array of custom fields that you can use in subscriptions linked to the payment plan.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaymentPlan
            Successful request. We created the payment plan.

        Examples
        --------
        import asyncio

        from payroc import (
            AsyncPayroc,
            PaymentPlanOrderBreakdown,
            PaymentPlanRecurringOrder,
            PaymentPlanSetupOrder,
            RetrievedTax,
        )

        client = AsyncPayroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.repeat_payments.payment_plans.create(
                processing_terminal_id_="1234001",
                idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
                payment_plan_id="PlanRef8765",
                name="Premium Club",
                description="Monthly Premium Club subscription",
                currency="USD",
                length=12,
                type="automatic",
                frequency="monthly",
                on_update="continue",
                on_delete="complete",
                custom_field_names=["yourCustomField"],
                setup_order=PaymentPlanSetupOrder(
                    amount=4999,
                    description="Initial setup fee for Premium Club subscription",
                    breakdown=PaymentPlanOrderBreakdown(
                        subtotal=4347,
                        taxes=[
                            RetrievedTax(
                                name="Sales Tax",
                                rate=5.0,
                            )
                        ],
                    ),
                ),
                recurring_order=PaymentPlanRecurringOrder(
                    amount=4999,
                    description="Monthly Premium Club subscription",
                    breakdown=PaymentPlanOrderBreakdown(
                        subtotal=4347,
                        taxes=[
                            RetrievedTax(
                                name="Sales Tax",
                                rate=5.0,
                            )
                        ],
                    ),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(
            processing_terminal_id_,
            idempotency_key=idempotency_key,
            payment_plan_id=payment_plan_id,
            name=name,
            currency=currency,
            type=type,
            frequency=frequency,
            on_update=on_update,
            on_delete=on_delete,
            setup_order=setup_order,
            recurring_order=recurring_order,
            processing_terminal_id=processing_terminal_id,
            description=description,
            length=length,
            custom_field_names=custom_field_names,
            request_options=request_options,
        )
        return _response.data

    async def retrieve(
        self,
        processing_terminal_id: str,
        payment_plan_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaymentPlan:
        """
        Use this method to retrieve information about a payment plan.

        To retrieve a payment plan, you need its paymentPlanId. Our gateway returned the paymentPlanId in the response of the [Create Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/create) method.

        **Note:** If you don't have the paymentPlanId, use our [List Payment Plans](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/list) method to search for the payment plan.

        Our gateway returns the following information about the payment plan:

          -    Name, length, and currency of the plan
          -    How often our gateway collects each payment
          -    How much our gateway collects for each payment
          -    What happens if the merchant updates or deletes the plan

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        payment_plan_id : str
            Unique identifier that the merchant assigned to the payment plan.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaymentPlan
            Successful request. Returns the requested payment plan.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.repeat_payments.payment_plans.retrieve(
                processing_terminal_id="1234001",
                payment_plan_id="PlanRef8765",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.retrieve(
            processing_terminal_id, payment_plan_id, request_options=request_options
        )
        return _response.data

    async def delete(
        self,
        processing_terminal_id: str,
        payment_plan_id: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Use this method to delete a payment plan.

        > **Important:** When you delete a payment plan, you can’t recover it. You also won’t be able to add subscriptions to the payment plan.

        To delete a payment plan, you need its paymentPlanId, which you sent in the request of the [Create Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/create) method.

        **Note:** If you don't have the paymentPlanId, use our [List Payment Plans](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/list) method to search for the payment plan.

        The value you sent for the onDelete parameter when you created the payment plan indicates what happens to associated subscriptions when you delete the plan:

          -    `complete` - Our gateway stops taking payments for the subscriptions associated with the payment plan.
          -    `continue` - Our gateway continues to take payments for the subscriptions associated with the payment plan. To stop a subscription for a cancelled payment plan, go to the [Deactivate Subscription](https://docs.payroc.com/api/schema/repeat-payments/subscriptions/deactivate) method.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        payment_plan_id : str
            Unique identifier that the merchant assigned to the payment plan.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.repeat_payments.payment_plans.delete(
                processing_terminal_id="1234001",
                payment_plan_id="PlanRef8765",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete(
            processing_terminal_id, payment_plan_id, request_options=request_options
        )
        return _response.data

    async def partially_update(
        self,
        processing_terminal_id: str,
        payment_plan_id: str,
        *,
        idempotency_key: str,
        request: PatchRequest,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaymentPlan:
        """
        Use this method to partially update a payment plan. Structure your request to follow the [RFC 6902](https://datatracker.ietf.org/doc/html/rfc6902) standard.

        To update a payment plan, you need its paymentPlanId, which you sent in the request of the [Create Payment Plan](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/create) method.

        **Note:** If you don't have the paymentPlanId, use our [List Payment Plans](https://docs.payroc.com/api/schema/repeat-payments/payment-plans/list) method to search for the payment plan.

        You can update all of the properties of the payment plan except for the paymentPlanId.

        The value you sent for the onUpdate parameter when you created the payment plan indicates what happens to the associated subscriptions when you update the plan:
        - `update` - Our gateway updates the subscriptions associated with the payment plan.
        - `continue` - Our  gateway doesn't update the subscriptions associated with the payment plan.

        Parameters
        ----------
        processing_terminal_id : str
            Unique identifier that we assigned to the terminal.

        payment_plan_id : str
            Unique identifier that the merchant assigned to the payment plan.

        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        request : PatchRequest

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaymentPlan
            Successful request. We updated the payment plan.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc, PatchDocument_Remove

        client = AsyncPayroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.repeat_payments.payment_plans.partially_update(
                processing_terminal_id="1234001",
                payment_plan_id="PlanRef8765",
                idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
                request=[
                    PatchDocument_Remove(
                        path="path",
                    ),
                    PatchDocument_Remove(
                        path="path",
                    ),
                    PatchDocument_Remove(
                        path="path",
                    ),
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.partially_update(
            processing_terminal_id,
            payment_plan_id,
            idempotency_key=idempotency_key,
            request=request,
            request_options=request_options,
        )
        return _response.data
