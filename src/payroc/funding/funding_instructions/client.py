# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

from ...core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ...core.custom_pagination import AsyncPayrocPager, SyncPayrocPager
from ...core.request_options import RequestOptions
from ...types.instruction import Instruction
from ...types.instruction_merchants_item import InstructionMerchantsItem
from ...types.instruction_status import InstructionStatus
from .raw_client import AsyncRawFundingInstructionsClient, RawFundingInstructionsClient
from .types.list_funding_instructions_response import ListFundingInstructionsResponse
from .types.list_funding_instructions_response_data_item import ListFundingInstructionsResponseDataItem

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class FundingInstructionsClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawFundingInstructionsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawFundingInstructionsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawFundingInstructionsClient
        """
        return self._raw_client

    def list(
        self,
        *,
        date_from: dt.date,
        date_to: dt.date,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SyncPayrocPager[ListFundingInstructionsResponseDataItem, ListFundingInstructionsResponse]:
        """
        > Important: You can return a list of funding instructions from only the previous two years. If you want to view a funding instruction from more than two years ago and you have its instructionId, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of funding instructions within a specific date range.

        **Note:** If you want to view the details of a specific funding instruction and you have its instructionId, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Our gateway returns the following information for each instruction in the list:
        -    Status of the funding instruction.
        -    Funding information, including which merchant's funding balance we distribute and the funding account that we send the balance to.

        For each funding instruction, we also return the instructionId, which you can use to perform follow-on actions.

        Parameters
        ----------
        date_from : dt.date
            Filter by funding instructions sent after a specific date. Send a value in **YYYY-MM-DD** format.

        date_to : dt.date
            Filter by funding instructions sent before a specific date. Send a value in **YYYY-MM-DD** format.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SyncPayrocPager[ListFundingInstructionsResponseDataItem, ListFundingInstructionsResponse]
            Successful request. Returns a list of funding instructions.

        Examples
        --------
        import datetime

        from payroc import Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        response = client.funding.funding_instructions.list(
            before="2571",
            after="8516",
            limit=1,
            date_from=datetime.date.fromisoformat(
                "2024-07-01",
            ),
            date_to=datetime.date.fromisoformat(
                "2024-07-03",
            ),
        )
        for item in response:
            yield item
        # alternatively, you can paginate page-by-page
        for page in response.iter_pages():
            yield page
        """
        return self._raw_client.list(
            date_from=date_from,
            date_to=date_to,
            before=before,
            after=after,
            limit=limit,
            request_options=request_options,
        )

    def create(
        self,
        *,
        idempotency_key: str,
        instruction_id: typing.Optional[int] = OMIT,
        created_date: typing.Optional[str] = OMIT,
        last_modified_date: typing.Optional[str] = OMIT,
        status: typing.Optional[InstructionStatus] = OMIT,
        merchants: typing.Optional[typing.Sequence[InstructionMerchantsItem]] = OMIT,
        metadata: typing.Optional[typing.Dict[str, str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> Instruction:
        """
        Use this method to create a funding instruction that tells us how to distribute the funds from your merchants' transactions.

        **Note:** Before you create a funding instruction, you can use our [List Funding Balances](https://docs.payroc.com/api/schema/funding/funding-activity/retrieve-balance) method to view the amount of available funds that a merchant has.

        In your request, include an array of merchantInstruction objects. Each merchantInstruction object contains the following:
        -    Merchant ID (MID) of the merchant whose funding balance you want to distribute.
        -    Funding account that you want to send funds to.
        -    Amount that you want to send to the funding account.

        Our gateway returns the instructionId, which you can use to run follow-on actions.

        Parameters
        ----------
        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        instruction_id : typing.Optional[int]
            Unique identifier that we assigned to the funding instruction.

        created_date : typing.Optional[str]
            Date that we created the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        last_modified_date : typing.Optional[str]
            Date of the most recent change to the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        status : typing.Optional[InstructionStatus]
            Status of the funding instruction. Our gateway returns one of the following values:
            - `accepted` - We have received the funding instruction but have not yet reviewed it.
            - `pending` - We have received the funding instruction and we are reviewing it.
            - `completed` - We have reviewed and processed the funding instruction.

        merchants : typing.Optional[typing.Sequence[InstructionMerchantsItem]]
            Array of merchants objects. Each object specifies the merchant whose funding balance we distribute and who you want to send the funds to.

        metadata : typing.Optional[typing.Dict[str, str]]
            [Metadata](https://docs.payroc.com/api/metadata) object you can use to include custom data with your request.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        Instruction
            Successful request. We accepted the instructions.

        Examples
        --------
        from payroc import (
            InstructionMerchantsItem,
            InstructionMerchantsItemRecipientsItem,
            InstructionMerchantsItemRecipientsItemAmount,
            Payroc,
        )

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.funding.funding_instructions.create(
            idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
            merchants=[
                InstructionMerchantsItem(
                    merchant_id="4525644354",
                    recipients=[
                        InstructionMerchantsItemRecipientsItem(
                            funding_account_id=123,
                            payment_method="ACH",
                            amount=InstructionMerchantsItemRecipientsItemAmount(
                                value=120000,
                                currency="USD",
                            ),
                            metadata={"yourCustomField": "abc123"},
                        )
                    ],
                )
            ],
            metadata={"yourCustomField": "abc123"},
        )
        """
        _response = self._raw_client.create(
            idempotency_key=idempotency_key,
            instruction_id=instruction_id,
            created_date=created_date,
            last_modified_date=last_modified_date,
            status=status,
            merchants=merchants,
            metadata=metadata,
            request_options=request_options,
        )
        return _response.data

    def retrieve(self, instruction_id: int, *, request_options: typing.Optional[RequestOptions] = None) -> Instruction:
        """
        Use this method to retrieve information about a funding instruction.

        To retrieve a funding instruction, you need its instructionId. Our gateway returned the instructionId in the response of the [Create Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/create) method.

        **Note:** If you don't have the instructionId, use our [List Funding Instructions](https://docs.payroc.com/api/schema/funding/funding-instructions/list) method to search for the funding instruction.

        Our gateway returns the following information about the funding instruction:
        -    Status of the funding instruction.
        -    Funding information, including which merchant's funding balance we distribute and the funding account that we send the balance to.

        Parameters
        ----------
        instruction_id : int
            Unique identifier that we assigned to the funding instruction.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        Instruction
            Successful request. Returns the funding instruction.

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.funding.funding_instructions.retrieve(
            instruction_id=1,
        )
        """
        _response = self._raw_client.retrieve(instruction_id, request_options=request_options)
        return _response.data

    def update(
        self,
        instruction_id_: int,
        *,
        instruction_id: typing.Optional[int] = OMIT,
        created_date: typing.Optional[str] = OMIT,
        last_modified_date: typing.Optional[str] = OMIT,
        status: typing.Optional[InstructionStatus] = OMIT,
        merchants: typing.Optional[typing.Sequence[InstructionMerchantsItem]] = OMIT,
        metadata: typing.Optional[typing.Dict[str, str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        > **Important:** You can update a funding instruction only if its status is `accepted`. To view the status of a funding instruction, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Use this method to update the details of a funding instruction.

        To update a funding instruction, you need its instructionId. Our gateway returned the instructionId in the response of the [Create Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/create) method.

        **Note:** If you don't have the fundingInstructionId, use our [List Funding Instructions](https://docs.payroc.com/api/schema/funding/funding-instructions/list) method to search for the funding instruction.

        You can modify the following information for the funding instruction:
        -    Merchant ID (MID) of the merchant whose funding balance you want to distribute.
        -    Funding account that you want to send funds to.
        -    Amount that you want to send to the funding account.

        Parameters
        ----------
        instruction_id_ : int
            Unique identifier that we assigned to the funding instruction.

        instruction_id : typing.Optional[int]
            Unique identifier that we assigned to the funding instruction.

        created_date : typing.Optional[str]
            Date that we created the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        last_modified_date : typing.Optional[str]
            Date of the most recent change to the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        status : typing.Optional[InstructionStatus]
            Status of the funding instruction. Our gateway returns one of the following values:
            - `accepted` - We have received the funding instruction but have not yet reviewed it.
            - `pending` - We have received the funding instruction and we are reviewing it.
            - `completed` - We have reviewed and processed the funding instruction.

        merchants : typing.Optional[typing.Sequence[InstructionMerchantsItem]]
            Array of merchants objects. Each object specifies the merchant whose funding balance we distribute and who you want to send the funds to.

        metadata : typing.Optional[typing.Dict[str, str]]
            [Metadata](https://docs.payroc.com/api/metadata) object you can use to include custom data with your request.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from payroc import (
            InstructionMerchantsItem,
            InstructionMerchantsItemRecipientsItem,
            InstructionMerchantsItemRecipientsItemAmount,
            Payroc,
        )

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.funding.funding_instructions.update(
            instruction_id_=1,
            merchants=[
                InstructionMerchantsItem(
                    merchant_id="9876543219",
                    recipients=[
                        InstructionMerchantsItemRecipientsItem(
                            funding_account_id=124,
                            payment_method="ACH",
                            amount=InstructionMerchantsItemRecipientsItemAmount(
                                value=69950,
                                currency="USD",
                            ),
                            metadata={"supplier": "IT Support Services"},
                        )
                    ],
                )
            ],
            metadata={"instructionCreatedBy": "Jane Doe"},
        )
        """
        _response = self._raw_client.update(
            instruction_id_,
            instruction_id=instruction_id,
            created_date=created_date,
            last_modified_date=last_modified_date,
            status=status,
            merchants=merchants,
            metadata=metadata,
            request_options=request_options,
        )
        return _response.data

    def delete(self, instruction_id: int, *, request_options: typing.Optional[RequestOptions] = None) -> None:
        """
        > **Important:** You can delete a funding instruction only if its status is `accepted`. To view the status of a funding instruction, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Use this method to delete a funding instruction.

        To delete a funding instruction, you need its instructionId. Our gateway returned the instructionId in the response of the [Create Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/create) method.

        **Note:** If you don't have the instructionId, use our [List Funding Instructions](https://docs.payroc.com/api/schema/funding/funding-instructions/list) method to search for the funding instruction.

        Parameters
        ----------
        instruction_id : int
            Unique identifier that we assigned to the funding instruction.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            api_key="YOUR_API_KEY",
        )
        client.funding.funding_instructions.delete(
            instruction_id=1,
        )
        """
        _response = self._raw_client.delete(instruction_id, request_options=request_options)
        return _response.data


class AsyncFundingInstructionsClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawFundingInstructionsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawFundingInstructionsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawFundingInstructionsClient
        """
        return self._raw_client

    async def list(
        self,
        *,
        date_from: dt.date,
        date_to: dt.date,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncPayrocPager[ListFundingInstructionsResponseDataItem, ListFundingInstructionsResponse]:
        """
        > Important: You can return a list of funding instructions from only the previous two years. If you want to view a funding instruction from more than two years ago and you have its instructionId, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of funding instructions within a specific date range.

        **Note:** If you want to view the details of a specific funding instruction and you have its instructionId, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Our gateway returns the following information for each instruction in the list:
        -    Status of the funding instruction.
        -    Funding information, including which merchant's funding balance we distribute and the funding account that we send the balance to.

        For each funding instruction, we also return the instructionId, which you can use to perform follow-on actions.

        Parameters
        ----------
        date_from : dt.date
            Filter by funding instructions sent after a specific date. Send a value in **YYYY-MM-DD** format.

        date_to : dt.date
            Filter by funding instructions sent before a specific date. Send a value in **YYYY-MM-DD** format.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncPayrocPager[ListFundingInstructionsResponseDataItem, ListFundingInstructionsResponse]
            Successful request. Returns a list of funding instructions.

        Examples
        --------
        import asyncio
        import datetime

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            response = await client.funding.funding_instructions.list(
                before="2571",
                after="8516",
                limit=1,
                date_from=datetime.date.fromisoformat(
                    "2024-07-01",
                ),
                date_to=datetime.date.fromisoformat(
                    "2024-07-03",
                ),
            )
            async for item in response:
                yield item

            # alternatively, you can paginate page-by-page
            async for page in response.iter_pages():
                yield page


        asyncio.run(main())
        """
        return await self._raw_client.list(
            date_from=date_from,
            date_to=date_to,
            before=before,
            after=after,
            limit=limit,
            request_options=request_options,
        )

    async def create(
        self,
        *,
        idempotency_key: str,
        instruction_id: typing.Optional[int] = OMIT,
        created_date: typing.Optional[str] = OMIT,
        last_modified_date: typing.Optional[str] = OMIT,
        status: typing.Optional[InstructionStatus] = OMIT,
        merchants: typing.Optional[typing.Sequence[InstructionMerchantsItem]] = OMIT,
        metadata: typing.Optional[typing.Dict[str, str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> Instruction:
        """
        Use this method to create a funding instruction that tells us how to distribute the funds from your merchants' transactions.

        **Note:** Before you create a funding instruction, you can use our [List Funding Balances](https://docs.payroc.com/api/schema/funding/funding-activity/retrieve-balance) method to view the amount of available funds that a merchant has.

        In your request, include an array of merchantInstruction objects. Each merchantInstruction object contains the following:
        -    Merchant ID (MID) of the merchant whose funding balance you want to distribute.
        -    Funding account that you want to send funds to.
        -    Amount that you want to send to the funding account.

        Our gateway returns the instructionId, which you can use to run follow-on actions.

        Parameters
        ----------
        idempotency_key : str
            Unique identifier that you generate for each request. You must use the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for the identifier. For more information about the idempotency key, go to [Idempotency](https://docs.payroc.com/api/idempotency).

        instruction_id : typing.Optional[int]
            Unique identifier that we assigned to the funding instruction.

        created_date : typing.Optional[str]
            Date that we created the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        last_modified_date : typing.Optional[str]
            Date of the most recent change to the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        status : typing.Optional[InstructionStatus]
            Status of the funding instruction. Our gateway returns one of the following values:
            - `accepted` - We have received the funding instruction but have not yet reviewed it.
            - `pending` - We have received the funding instruction and we are reviewing it.
            - `completed` - We have reviewed and processed the funding instruction.

        merchants : typing.Optional[typing.Sequence[InstructionMerchantsItem]]
            Array of merchants objects. Each object specifies the merchant whose funding balance we distribute and who you want to send the funds to.

        metadata : typing.Optional[typing.Dict[str, str]]
            [Metadata](https://docs.payroc.com/api/metadata) object you can use to include custom data with your request.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        Instruction
            Successful request. We accepted the instructions.

        Examples
        --------
        import asyncio

        from payroc import (
            AsyncPayroc,
            InstructionMerchantsItem,
            InstructionMerchantsItemRecipientsItem,
            InstructionMerchantsItemRecipientsItemAmount,
        )

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.funding.funding_instructions.create(
                idempotency_key="8e03978e-40d5-43e8-bc93-6894a57f9324",
                merchants=[
                    InstructionMerchantsItem(
                        merchant_id="4525644354",
                        recipients=[
                            InstructionMerchantsItemRecipientsItem(
                                funding_account_id=123,
                                payment_method="ACH",
                                amount=InstructionMerchantsItemRecipientsItemAmount(
                                    value=120000,
                                    currency="USD",
                                ),
                                metadata={"yourCustomField": "abc123"},
                            )
                        ],
                    )
                ],
                metadata={"yourCustomField": "abc123"},
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(
            idempotency_key=idempotency_key,
            instruction_id=instruction_id,
            created_date=created_date,
            last_modified_date=last_modified_date,
            status=status,
            merchants=merchants,
            metadata=metadata,
            request_options=request_options,
        )
        return _response.data

    async def retrieve(
        self, instruction_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> Instruction:
        """
        Use this method to retrieve information about a funding instruction.

        To retrieve a funding instruction, you need its instructionId. Our gateway returned the instructionId in the response of the [Create Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/create) method.

        **Note:** If you don't have the instructionId, use our [List Funding Instructions](https://docs.payroc.com/api/schema/funding/funding-instructions/list) method to search for the funding instruction.

        Our gateway returns the following information about the funding instruction:
        -    Status of the funding instruction.
        -    Funding information, including which merchant's funding balance we distribute and the funding account that we send the balance to.

        Parameters
        ----------
        instruction_id : int
            Unique identifier that we assigned to the funding instruction.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        Instruction
            Successful request. Returns the funding instruction.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.funding.funding_instructions.retrieve(
                instruction_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.retrieve(instruction_id, request_options=request_options)
        return _response.data

    async def update(
        self,
        instruction_id_: int,
        *,
        instruction_id: typing.Optional[int] = OMIT,
        created_date: typing.Optional[str] = OMIT,
        last_modified_date: typing.Optional[str] = OMIT,
        status: typing.Optional[InstructionStatus] = OMIT,
        merchants: typing.Optional[typing.Sequence[InstructionMerchantsItem]] = OMIT,
        metadata: typing.Optional[typing.Dict[str, str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        > **Important:** You can update a funding instruction only if its status is `accepted`. To view the status of a funding instruction, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Use this method to update the details of a funding instruction.

        To update a funding instruction, you need its instructionId. Our gateway returned the instructionId in the response of the [Create Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/create) method.

        **Note:** If you don't have the fundingInstructionId, use our [List Funding Instructions](https://docs.payroc.com/api/schema/funding/funding-instructions/list) method to search for the funding instruction.

        You can modify the following information for the funding instruction:
        -    Merchant ID (MID) of the merchant whose funding balance you want to distribute.
        -    Funding account that you want to send funds to.
        -    Amount that you want to send to the funding account.

        Parameters
        ----------
        instruction_id_ : int
            Unique identifier that we assigned to the funding instruction.

        instruction_id : typing.Optional[int]
            Unique identifier that we assigned to the funding instruction.

        created_date : typing.Optional[str]
            Date that we created the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        last_modified_date : typing.Optional[str]
            Date of the most recent change to the funding instruction. The date format follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard.

        status : typing.Optional[InstructionStatus]
            Status of the funding instruction. Our gateway returns one of the following values:
            - `accepted` - We have received the funding instruction but have not yet reviewed it.
            - `pending` - We have received the funding instruction and we are reviewing it.
            - `completed` - We have reviewed and processed the funding instruction.

        merchants : typing.Optional[typing.Sequence[InstructionMerchantsItem]]
            Array of merchants objects. Each object specifies the merchant whose funding balance we distribute and who you want to send the funds to.

        metadata : typing.Optional[typing.Dict[str, str]]
            [Metadata](https://docs.payroc.com/api/metadata) object you can use to include custom data with your request.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from payroc import (
            AsyncPayroc,
            InstructionMerchantsItem,
            InstructionMerchantsItemRecipientsItem,
            InstructionMerchantsItemRecipientsItemAmount,
        )

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.funding.funding_instructions.update(
                instruction_id_=1,
                merchants=[
                    InstructionMerchantsItem(
                        merchant_id="9876543219",
                        recipients=[
                            InstructionMerchantsItemRecipientsItem(
                                funding_account_id=124,
                                payment_method="ACH",
                                amount=InstructionMerchantsItemRecipientsItemAmount(
                                    value=69950,
                                    currency="USD",
                                ),
                                metadata={"supplier": "IT Support Services"},
                            )
                        ],
                    )
                ],
                metadata={"instructionCreatedBy": "Jane Doe"},
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update(
            instruction_id_,
            instruction_id=instruction_id,
            created_date=created_date,
            last_modified_date=last_modified_date,
            status=status,
            merchants=merchants,
            metadata=metadata,
            request_options=request_options,
        )
        return _response.data

    async def delete(self, instruction_id: int, *, request_options: typing.Optional[RequestOptions] = None) -> None:
        """
        > **Important:** You can delete a funding instruction only if its status is `accepted`. To view the status of a funding instruction, use our [Retrieve Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/retrieve) method.

        Use this method to delete a funding instruction.

        To delete a funding instruction, you need its instructionId. Our gateway returned the instructionId in the response of the [Create Funding Instruction](https://docs.payroc.com/api/schema/funding/funding-instructions/create) method.

        **Note:** If you don't have the instructionId, use our [List Funding Instructions](https://docs.payroc.com/api/schema/funding/funding-instructions/list) method to search for the funding instruction.

        Parameters
        ----------
        instruction_id : int
            Unique identifier that we assigned to the funding instruction.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.funding.funding_instructions.delete(
                instruction_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete(instruction_id, request_options=request_options)
        return _response.data
