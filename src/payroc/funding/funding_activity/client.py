# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

from ...core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ...core.custom_pagination import AsyncPayrocPager, SyncPayrocPager
from ...core.request_options import RequestOptions
from ...types.activity_record import ActivityRecord
from .raw_client import AsyncRawFundingActivityClient, RawFundingActivityClient
from .types.list_funding_activity_response import ListFundingActivityResponse
from .types.retrieve_balance_funding_activity_response import RetrieveBalanceFundingActivityResponse


class FundingActivityClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawFundingActivityClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawFundingActivityClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawFundingActivityClient
        """
        return self._raw_client

    def retrieve_balance(
        self,
        *,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        merchant_id: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> RetrieveBalanceFundingActivityResponse:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of funding balances available for each merchant linked to your account.

        Use query parameters to filter the list of results we return, for example, to search for the funding balance for a specific merchant.

        Our gateway returns the following information about each merchant in the list:
        - Total funds for the merchant.
        - Available funds that you can use for funding instructions.
        - Pending funds that we have not yet sent to funding accounts.

        Parameters
        ----------
        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        merchant_id : typing.Optional[str]
            Filter results by the unique identifier that the processor assigned to the merchant.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        RetrieveBalanceFundingActivityResponse
            Successful request. Returns the funding balance available for each merchant.

        Examples
        --------
        from payroc import Payroc

        client = Payroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.funding.funding_activity.retrieve_balance(
            before="2571",
            after="8516",
            limit=1,
            merchant_id="4525644354",
        )
        """
        _response = self._raw_client.retrieve_balance(
            before=before, after=after, limit=limit, merchant_id=merchant_id, request_options=request_options
        )
        return _response.data

    def list(
        self,
        *,
        date_from: dt.date,
        date_to: dt.date,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        merchant_id: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> SyncPayrocPager[ActivityRecord, ListFundingActivityResponse]:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of activity associated with your merchants' funding balances within a specific date range.

        Use query parameters to filter the list of results we return, for example, to view the activity for a specific merchant's funding balance.

        Our gateway returns the following information about each activity in the list:
        - Name of the merchant who owns the funding balance.
        -    Amount of funds added or removed from the funding balance.
        -    Funding account that received funds from the funding balance.

        Parameters
        ----------
        date_from : dt.date
            Filter by activity after a specific date. Send a value in **YYYY-MM-DD** format.

        date_to : dt.date
            Filter by activity before a specific date. Send a value in **YYYY-MM-DD** format.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        merchant_id : typing.Optional[str]
            Filter results by the unique identifier that the processor assigned to the merchant.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        SyncPayrocPager[ActivityRecord, ListFundingActivityResponse]
            Successful request. Returns a list of funding activity.

        Examples
        --------
        import datetime

        from payroc import Payroc

        client = Payroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        response = client.funding.funding_activity.list(
            before="2571",
            after="8516",
            limit=1,
            date_from=datetime.date.fromisoformat(
                "2024-07-02",
            ),
            date_to=datetime.date.fromisoformat(
                "2024-07-03",
            ),
            merchant_id="4525644354",
        )
        for item in response:
            yield item
        # alternatively, you can paginate page-by-page
        for page in response.iter_pages():
            yield page
        """
        return self._raw_client.list(
            date_from=date_from,
            date_to=date_to,
            before=before,
            after=after,
            limit=limit,
            merchant_id=merchant_id,
            request_options=request_options,
        )


class AsyncFundingActivityClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawFundingActivityClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawFundingActivityClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawFundingActivityClient
        """
        return self._raw_client

    async def retrieve_balance(
        self,
        *,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        merchant_id: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> RetrieveBalanceFundingActivityResponse:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of funding balances available for each merchant linked to your account.

        Use query parameters to filter the list of results we return, for example, to search for the funding balance for a specific merchant.

        Our gateway returns the following information about each merchant in the list:
        - Total funds for the merchant.
        - Available funds that you can use for funding instructions.
        - Pending funds that we have not yet sent to funding accounts.

        Parameters
        ----------
        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        merchant_id : typing.Optional[str]
            Filter results by the unique identifier that the processor assigned to the merchant.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        RetrieveBalanceFundingActivityResponse
            Successful request. Returns the funding balance available for each merchant.

        Examples
        --------
        import asyncio

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.funding.funding_activity.retrieve_balance(
                before="2571",
                after="8516",
                limit=1,
                merchant_id="4525644354",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.retrieve_balance(
            before=before, after=after, limit=limit, merchant_id=merchant_id, request_options=request_options
        )
        return _response.data

    async def list(
        self,
        *,
        date_from: dt.date,
        date_to: dt.date,
        before: typing.Optional[str] = None,
        after: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        merchant_id: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncPayrocPager[ActivityRecord, ListFundingActivityResponse]:
        """
        Use this method to return a [paginated](https://docs.payroc.com/api/pagination) list of activity associated with your merchants' funding balances within a specific date range.

        Use query parameters to filter the list of results we return, for example, to view the activity for a specific merchant's funding balance.

        Our gateway returns the following information about each activity in the list:
        - Name of the merchant who owns the funding balance.
        -    Amount of funds added or removed from the funding balance.
        -    Funding account that received funds from the funding balance.

        Parameters
        ----------
        date_from : dt.date
            Filter by activity after a specific date. Send a value in **YYYY-MM-DD** format.

        date_to : dt.date
            Filter by activity before a specific date. Send a value in **YYYY-MM-DD** format.

        before : typing.Optional[str]
            Return the previous page of results before the value that you specify.

            You can’t send the before parameter in the same request as the after parameter.

        after : typing.Optional[str]
            Return the next page of results after the value that you specify.

            You can’t send the after parameter in the same request as the before parameter.

        limit : typing.Optional[int]
            Limit the maximum number of results that we return for each page.

        merchant_id : typing.Optional[str]
            Filter results by the unique identifier that the processor assigned to the merchant.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncPayrocPager[ActivityRecord, ListFundingActivityResponse]
            Successful request. Returns a list of funding activity.

        Examples
        --------
        import asyncio
        import datetime

        from payroc import AsyncPayroc

        client = AsyncPayroc(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            response = await client.funding.funding_activity.list(
                before="2571",
                after="8516",
                limit=1,
                date_from=datetime.date.fromisoformat(
                    "2024-07-02",
                ),
                date_to=datetime.date.fromisoformat(
                    "2024-07-03",
                ),
                merchant_id="4525644354",
            )
            async for item in response:
                yield item

            # alternatively, you can paginate page-by-page
            async for page in response.iter_pages():
                yield page


        asyncio.run(main())
        """
        return await self._raw_client.list(
            date_from=date_from,
            date_to=date_to,
            before=before,
            after=after,
            limit=limit,
            merchant_id=merchant_id,
            request_options=request_options,
        )
